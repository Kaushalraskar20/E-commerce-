<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Fashion Store</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #f5f7fa, #c3cfe2);
        }

        .login-box {
            max-width: 420px;
            margin: 120px auto;
            padding: 30px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.25);
        }

        .navbar {
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }

        .banner {
            background: linear-gradient(135deg, #000, #434343);
            color: #fff;
            padding: 70px 20px;
            text-align: center;
            border-radius: 0 0 40px 40px;
        }

        .search-box {
            max-width: 400px;
            margin: auto;
        }

        .btn-outline-dark {
            border-radius: 25px;
            padding: 8px 18px;
        }

        .card {
            border: none;
            border-radius: 18px;
            overflow: hidden;
            background: rgba(255, 255, 255, 0.85);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
        }

        .card img {
            height: 230px;
            object-fit: cover;
        }

        footer {
            background: linear-gradient(135deg, #000, #434343);
            color: #fff;
        }
    </style>
</head>

<body>

<!-- ================= LOGIN ================= -->
<div id="loginPage">
    <div class="login-box text-center">

        <!-- LOGIN FORM -->
        <div id="loginForm">
            <h3>Login</h3>
            <input id="username" class="form-control mb-2" placeholder="Username">
            <input id="password" type="password" class="form-control mb-3" placeholder="Password">
            <button class="btn btn-dark w-100" onclick="login()">Login</button>

            <p class="mt-3">
                New user?
                <a href="#" onclick="showRegister()">Register Now</a>
            </p>
            <p class="text-muted">admin / admin</p>
        </div>

        <!-- REGISTER FORM -->
        <div id="registerForm" style="display:none">
            <h3>Register</h3>
            <input id="regName" class="form-control mb-2" placeholder="Full Name">
            <input id="regUsername" class="form-control mb-2" placeholder="Username">
            <input id="regPassword" type="password" class="form-control mb-2" placeholder="Password">
            <input id="regConfirmPassword" type="password" class="form-control mb-3" placeholder="Confirm Password">
            <button class="btn btn-success w-100" onclick="register()">Register</button>

            <p class="mt-3">
                Already registered?
                <a href="#" onclick="showLogin()">Login</a>
            </p>
        </div>

    </div>
</div>

<!-- ================= STORE ================= -->
<div id="storePage" style="display:none">

    <nav class="navbar navbar-dark bg-dark">
        <div class="container">
            <span class="navbar-brand">FashionStore</span>

            <span class="text-white">
                Welcome, <strong id="navUsername"></strong>
            </span>

            <div>
                <button class="btn btn-warning btn-sm" onclick="openCart()">
                    Cart (<span id="cartCount">0</span>)
                </button>
                <button class="btn btn-danger btn-sm ms-2" onclick="logout()">Logout</button>
            </div>
        </div>
    </nav>

    <div class="banner">
        <h1>Fashion Collection</h1>
        <p>Trendy • Stylish • Affordable</p>
    </div>

    <div class="container mt-4">
        <input type="text" class="form-control search-box" placeholder="Search products..."
               onkeyup="searchProducts(this.value)">
    </div>

    <div class="container text-center mt-3">
        <button class="btn btn-outline-dark m-1" onclick="filterProducts('All')">All</button>
        <button class="btn btn-outline-dark m-1" onclick="filterProducts('Men')">Men</button>
        <button class="btn btn-outline-dark m-1" onclick="filterProducts('Women')">Women</button>
        <button class="btn btn-outline-dark m-1" onclick="filterProducts('Shoes')">Shoes</button>
        <button class="btn btn-outline-dark m-1" onclick="filterProducts('Accessories')">Accessories</button>
    </div>

    <div class="container mt-4">
        <div class="row" id="productList"></div>
    </div>

    <footer class="text-center p-3 mt-4">
        © 2026 FashionStore
    </footer>

</div>

<!-- ================= CART MODAL ================= -->
<div class="modal fade" id="cartModal">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5>Your Cart</h5>
                <button class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body" id="cartItems"></div>
            <div class="modal-footer">
                <h5>Total: ₹<span id="totalPrice">0</span></h5>
                <button class="btn btn-success" onclick="openCheckout()">Checkout</button>
            </div>
        </div>
    </div>
</div>

<!-- ================= CHECKOUT MODAL ================= -->
<div class="modal fade" id="checkoutModal">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5>Checkout</h5>
                <button class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <input class="form-control mb-2" placeholder="Full Name">
                <input class="form-control mb-2" placeholder="Address">
                <input class="form-control mb-2" placeholder="City">
                <input class="form-control mb-2" placeholder="Payment Method (UPI/Card)">
                <h5 class="mt-3">Order Total: ₹<span id="checkoutTotal"></span></h5>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" onclick="placeOrder()">Place Order</button>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
/* ================= AUTH USING LOCAL STORAGE ================= */

function getUsers() {
    return JSON.parse(localStorage.getItem("registeredUsers")) || [];
}

function saveUsers(users) {
    localStorage.setItem("registeredUsers", JSON.stringify(users));
}

function saveCurrentUser(user) {
    localStorage.setItem("currentUser", JSON.stringify(user));
}

function loadCurrentUser() {
    return JSON.parse(localStorage.getItem("currentUser"));
}

/* LOGIN */
function login() {
    const u = username.value.trim();
    const p = password.value;

    if (u === "admin" && p === "admin") {
        const admin = { name: "Admin", username: "admin" };
        saveCurrentUser(admin);
        showStore(admin);
        return;
    }

    const users = getUsers();
    const user = users.find(x => x.username === u && x.password === p);

    if (!user) {
        alert("Invalid Login");
        return;
    }

    saveCurrentUser(user);
    showStore(user);
}

/* REGISTER */
function register() {
    const name = regName.value.trim();
    const uname = regUsername.value.trim();
    const pass = regPassword.value;
    const cpass = regConfirmPassword.value;

    if (!name || !uname || !pass || !cpass) {
        alert("Fill all fields");
        return;
    }

    if (pass !== cpass) {
        alert("Passwords do not match");
        return;
    }

    const users = getUsers();
    if (users.some(u => u.username === uname)) {
        alert("Username already exists");
        return;
    }

    users.push({ id: Date.now(), name, username: uname, password: pass });
    saveUsers(users);

    alert("Registered successfully! Please login.");
    showLogin();
}

/* SHOW STORE */
function showStore(user) {
    loginPage.style.display = "none";
    storePage.style.display = "block";
    navUsername.innerText = user.name;
    displayProducts(products);
}

/* LOGOUT */
function logout() {
    localStorage.removeItem("currentUser");
    location.reload();
}

/* TOGGLE */
function showRegister() {
    loginForm.style.display = "none";
    registerForm.style.display = "block";
}

function showLogin() {
    registerForm.style.display = "none";
    loginForm.style.display = "block";
}

/* AUTO LOGIN */
window.onload = function () {
    const user = loadCurrentUser();
    if (user) showStore(user);
};

/* ================= PRODUCTS & CART (UNCHANGED) ================= */

const products = [
    { id: 1, name: "Men Jacket", price: 1999, cat: "Men", img: "men_jacket.jpg" },
    { id: 2, name: "Men T-Shirt", price: 999, cat: "Men", img: "men_tshirt.jpg" },
    { id: 3, name: "Women Dress", price: 2499, cat: "Women", img: "women_dress.jpg" },
    { id: 4, name: "Shoes", price: 2999, cat: "Shoes", img: "shoes.jpg" },
    { id: 5, name: "Handbag", price: 2199, cat: "Accessories", img: "handbag.jpg" },
    { id: 6, name: "Jeans", price: 1799, cat: "Men", img: "jeans.jpg" },
    { id: 7, name: "Women Top", price: 1299, cat: "Women", img: "top.jpg" }
];

let cart = [];

function displayProducts(list) {
    productList.innerHTML = "";
    list.forEach(p => {
        productList.innerHTML += `
<div class="col-md-4 mb-4">
<div class="card">
<img src="${p.img}">
<div class="card-body">
<h5>${p.name}</h5>
<p>₹${p.price}</p>
<select class="form-select mb-2">
<option>Size</option><option>S</option><option>M</option><option>L</option><option>XL</option>
</select>
<select class="form-select mb-2">
<option>Color</option><option>Black</option><option>Blue</option><option>Red</option>
</select>
<button class="btn btn-primary w-100" onclick="addToCart(${p.id})">Add to Cart</button>
</div>
</div>
</div>`;
    });
}

function filterProducts(cat) {
    cat === "All" ? displayProducts(products) :
        displayProducts(products.filter(p => p.cat === cat));
}

function searchProducts(text) {
    displayProducts(products.filter(p =>
        p.name.toLowerCase().includes(text.toLowerCase())
    ));
}

function addToCart(id) {
    let item = cart.find(i => i.id === id);
    item ? item.qty++ : cart.push({ ...products.find(p => p.id === id), qty: 1 });
    cartCount.innerText = cart.reduce((s, i) => s + i.qty, 0);
}

function openCart() {
    let html = "", total = 0;
    cart.forEach(i => {
        total += i.price * i.qty;
        html += `<p>${i.name} x ${i.qty} = ₹${i.price * i.qty}</p>`;
    });
    cartItems.innerHTML = html || "Cart is empty";
    totalPrice.innerText = total;
    new bootstrap.Modal(cartModal).show();
}

function openCheckout() {
    checkoutTotal.innerText = totalPrice.innerText;
    new bootstrap.Modal(checkoutModal).show();
}

function placeOrder() {
    alert("Order placed successfully!");
    location.reload();
}

function sendMessage() {
    alert("Message sent successfully!");
}
</script>

</body>
</html>
